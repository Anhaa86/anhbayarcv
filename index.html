<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏–Ω–∏–π —Ç—É—Ö–∞–π - CV</title>
    <style>
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #2575fc;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --accent-color: #ff6b6b;
            --success-color: #20c997;
            --warning-color: #ffd166;
            --info-color: #4dabf7;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 20px auto;
            background-color: white;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border-radius: 12px;
            border-top: 5px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }
        .container::before {
            content: "";
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            opacity: 0.1;
            border-radius: 0 0 0 100%;
            z-index: 0;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            position: relative;
        }
        header::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 3px;
        }
        .profile-container {
            margin: 0 auto 20px;
            width: 150px;
            height: 150px;
            position: relative;
        }
        .profile-image {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            background-color: #f0f0f0;
            transition: all 0.3s ease;
        }
        .profile-image:hover {
            transform: scale(1.05);
        }
        .change-image-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }
        .change-image-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }
        .admin-mode .change-image-btn {
            display: flex;
        }
        h1 {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 15px;
            font-size: 2.5rem;
            letter-spacing: 1px;
        }
        h2 {
            color: var(--primary-color);
            border-left: 4px solid var(--secondary-color);
            padding-left: 12px;
            margin-top: 30px;
            font-size: 1.5rem;
            display: inline-block;
            position: relative;
        }
        h2::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(to right, var(--secondary-color), transparent);
        }
        .contact-info {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
            padding: 10px;
            background-color: rgba(106, 17, 203, 0.05);
            border-radius: 8px;
        }
        .contact-info p {
            margin: 5px 0;
            padding: 5px 10px;
            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .section {
            margin-bottom: 30px;
            position: relative;
            padding: 15px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.7);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .section:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        a {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }
        a:hover {
            color: var(--primary-color);
            text-decoration: none;
        }
        .edit-btn {
            position: absolute;
            right: 10px;
            top: 10px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        .edit-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
        }
        .admin-buttons {
            margin: 30px 0 10px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        button {
            padding: 10px 20px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
        }
        #save-all-btn {
            background: linear-gradient(to right, #20c997, #38d39f);
        }
        #save-all-btn:hover {
            background: linear-gradient(to right, #38d39f, #20c997);
        }
        #cancel-btn {
            background: linear-gradient(to right, #ff6b6b, #ff8787);
        }
        #cancel-btn:hover {
            background: linear-gradient(to right, #ff8787, #ff6b6b);
        }
        #logout-btn {
            background: linear-gradient(to right, #adb5bd, #868e96);
        }
        #logout-btn:hover {
            background: linear-gradient(to right, #868e96, #adb5bd);
        }
        .admin-mode .edit-btn {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .admin-mode .section-controls {
            display: flex;
        }
        .section-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: none;
            gap: 5px;
        }
        .delete-section-btn {
            background: linear-gradient(to right, var(--accent-color), #ff8787);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        .delete-section-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
            background: linear-gradient(to right, #ff8787, var(--accent-color));
        }
        .add-section-container {
            margin: 20px 0;
            display: none;
            flex-direction: column;
            align-items: center;
        }
        .admin-mode .add-section-container {
            display: flex;
        }
        .add-section-btn {
            background: linear-gradient(to right, var(--info-color), var(--secondary-color));
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 25px;
        }
        .add-section-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .add-section-modal-content {
            background: linear-gradient(145deg, #ffffff, #f5f5f5);
            padding: 30px;
            border-radius: 15px;
            width: 320px;
            text-align: center;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.4s;
        }
        .add-section-modal-content h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            border: none;
        }
        .add-section-modal-content h2::after {
            display: none;
        }
        .add-section-modal-content label {
            display: block;
            text-align: left;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--dark-color);
        }
        .section-error {
            color: var(--accent-color);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
        }
        [contenteditable="true"] {
            border: 2px dashed var(--secondary-color);
            padding: 8px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
        }
        .login-modal, .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .login-content, .image-modal-content {
            background: linear-gradient(145deg, #ffffff, #f5f5f5);
            padding: 30px;
            border-radius: 15px;
            width: 320px;
            text-align: center;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.4s;
        }
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .login-content h2, .image-modal-content h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            border: none;
        }
        .login-content h2::after, .image-modal-content h2::after {
            display: none;
        }
        .login-content input, .image-modal-content input {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        .login-content input:focus, .image-modal-content input:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(37, 117, 252, 0.2);
            outline: none;
        }
        .login-content button, .image-modal-content button {
            width: 100%;
            margin-top: 10px;
        }
        #close-modal-btn, #close-image-modal-btn {
            background: linear-gradient(to right, #adb5bd, #868e96);
            margin-top: 10px;
        }
        .preview-container {
            margin: 15px 0;
            border-radius: 10px;
            overflow: hidden;
            max-width: 100%;
            height: 150px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .preview-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 20px;
            }
            h1 {
                font-size: 2rem;
            }
            .login-content, .image-modal-content {
                width: 90%;
                max-width: 320px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="profile-container">
                <img id="profile-img" src="https://via.placeholder.com/150" alt="–®–∏–Ω—ç–±–∞—è—Ä –ê–Ω—Ö–±–∞—è—Ä" class="profile-image">
                <button id="change-image-btn" class="change-image-btn">üì∑</button>
            </div>
            <h1 id="name">–®–∏–Ω—ç–±–∞—è—Ä –ê–Ω—Ö–±–∞—è—Ä</h1>
            <div class="contact-info">
                <p id="email">Email: <a href="mailto:anhbayranhaa0702@gmail.com">anhbayranhaa0702@gmail.com</a></p>
                <p id="phone">–£—Ç–∞—Å: 95156268</p>
            </div>
        </header>

        <div id="sections-container">
            <div class="section" data-id="about-me-section">
                <h2>–ú–∏–Ω–∏–π —Ç—É—Ö–∞–π</h2>
                <div id="about-me-content">
                    <p>–ú–∏–Ω–∏–π —Ö—É–≤—å–¥ –ø—Ä–æ–≥—Ä–∞–º —Ö–∞–Ω–≥–∞–º–∂–∏–π–Ω —á–∏–≥–ª—ç–ª—ç—ç—Ä “Ø–π–ª –∞–∂–∏–ª–ª–∞–≥–∞–∞ —è–≤—É—É–ª–¥–∞–≥, —à–∏–Ω—ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—É–¥—ã–≥ —Å—É—Ä—á —ç–∑—ç–º—à–∏—Ö —Å–æ–Ω–∏—Ä—Ö–æ–ª—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º —Ö–∞–Ω–≥–∞–º–∂–∏–π–Ω –∏–Ω–∂–µ–Ω–µ—Ä.</p>
                </div>
                <div class="section-controls">
                    <button class="edit-btn">‚úèÔ∏è</button>
                    <button class="delete-section-btn">üóëÔ∏è</button>
                </div>
            </div>

            <div class="section" data-id="experience-section">
                <h2>–î–∞–¥–ª–∞–≥–∞, —Ç—É—Ä—à–ª–∞–≥–∞</h2>
                <div id="experience-content">
                    <p>Setunari LLC - –ü—Ä–æ–≥—Ä–∞–º —Ö–∞–Ω–≥–∞–º–∂–∏–π–Ω –¥–∞–¥–ª–∞–≥–∞–∂–∏–≥—á (2024 –æ–Ω—ã 6-8 —Å–∞—Ä)</p>
                </div>
                <div class="section-controls">
                    <button class="edit-btn">‚úèÔ∏è</button>
                    <button class="delete-section-btn">üóëÔ∏è</button>
                </div>
            </div>

            <div class="section" data-id="skills-section">
                <h2>–£—Ä —á–∞–¥–≤–∞—Ä</h2>
                <div id="skills-content">
                    <p>–ü—Ä–æ–≥—Ä–∞–º—á–ª–∞–ª: HTML, CSS, Javascript, Mysql</p>
                </div>
                <div class="section-controls">
                    <button class="edit-btn">‚úèÔ∏è</button>
                    <button class="delete-section-btn">üóëÔ∏è</button>
                </div>
            </div>

            <div class="section" data-id="achievements-section">
                <h2>–ê–º–∂–∏–ª—Ç —É—Ä–∞–ª–¥–∞–∞–Ω</h2>
                <div id="achievements-content">
                    <p>–ò–ó–û–£–ò–°-–∏–π–Ω Hackathon 3-—Ä –±–∞–π—Ä (2022)</p>
                </div>
                <div class="section-controls">
                    <button class="edit-btn">‚úèÔ∏è</button>
                    <button class="delete-section-btn">üóëÔ∏è</button>
                </div>
            </div>
        </div>

        <div class="add-section-container">
            <button id="add-section-btn" class="add-section-btn">
                <span>‚ûï</span> Add New Section
            </button>
        </div>

        <div class="admin-buttons">
            <button id="admin-login-btn">Admin Login</button>
            <button id="save-all-btn" style="display: none;">Save Changes</button>
            <button id="cancel-btn" style="display: none;">Cancel</button>
            <button id="logout-btn" style="display: none;">Logout</button>
        </div>
    </div>

    <div class="login-modal" id="login-modal">
        <div class="login-content">
            <h2>Admin Login</h2>
            <input type="password" id="admin-password" placeholder="Password">
            <button id="login-btn">Login</button>
            <button id="close-modal-btn">Cancel</button>
        </div>
    </div>

    <div class="image-modal" id="image-modal">
        <div class="image-modal-content">
            <h2>Change Profile Image</h2>
            <p>Enter the URL of your profile image:</p>
            <input type="text" id="image-url-input" placeholder="https://example.com/your-image.jpg">
            <div class="preview-container">
                <img id="preview-image" src="https://via.placeholder.com/150" alt="Preview" class="preview-image">
            </div>
            <button id="save-image-btn">Save Image</button>
            <button id="close-image-modal-btn">Cancel</button>
        </div>
    </div>

    <div class="add-section-modal" id="add-section-modal">
        <div class="add-section-modal-content">
            <h2>Add New Section</h2>
            
            <div>
                <label for="section-title-input">Section Title:</label>
                <input type="text" id="section-title-input" placeholder="E.g., Education, Projects, etc.">
                <div id="section-title-error" class="section-error">Please enter a section title</div>
            </div>
            
            <div>
                <label for="section-content-input">Initial Content:</label>
                <input type="text" id="section-content-input" placeholder="Initial content for your section">
                <div id="section-content-error" class="section-error">Please enter some content</div>
            </div>
            
            <button id="create-section-btn">Create Section</button>
            <button id="close-add-section-modal-btn">Cancel</button>
        </div>
    </div>

    <script>
        // Simple admin password - in a real app, this should be server-side
        const ADMIN_PASSWORD = "admin123";
        
        // DOM Elements
        const adminLoginBtn = document.getElementById('admin-login-btn');
        const saveAllBtn = document.getElementById('save-all-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const loginModal = document.getElementById('login-modal');
        const loginBtn = document.getElementById('login-btn');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const adminPasswordInput = document.getElementById('admin-password');
        const profileImg = document.getElementById('profile-img');
        const changeImageBtn = document.getElementById('change-image-btn');
        const imageModal = document.getElementById('image-modal');
        const imageUrlInput = document.getElementById('image-url-input');
        const previewImage = document.getElementById('preview-image');
        const saveImageBtn = document.getElementById('save-image-btn');
        const closeImageModalBtn = document.getElementById('close-image-modal-btn');
        const sectionsContainer = document.getElementById('sections-container');
        const addSectionBtn = document.getElementById('add-section-btn');
        const addSectionModal = document.getElementById('add-section-modal');
        const sectionTitleInput = document.getElementById('section-title-input');
        const sectionContentInput = document.getElementById('section-content-input');
        const createSectionBtn = document.getElementById('create-section-btn');
        const closeAddSectionModalBtn = document.getElementById('close-add-section-modal-btn');
        const sectionTitleError = document.getElementById('section-title-error');
        const sectionContentError = document.getElementById('section-content-error');
        
        // Initialize CV content from localStorage if available
        function loadCVContent() {
            // Load profile image if it exists in localStorage
            const savedImageUrl = localStorage.getItem('profileImageUrl');
            if (savedImageUrl) {
                profileImg.src = savedImageUrl;
            }
            
            // Load saved sections
            loadSections();
        }
        
        // Load sections from localStorage
        function loadSections() {
            const savedSections = localStorage.getItem('cvSections');
            
            if (savedSections) {
                sectionsContainer.innerHTML = '';
                const sections = JSON.parse(savedSections);
                
                sections.forEach(section => {
                    createSectionElement(section.id, section.title, section.content);
                });
                
                // Reattach event listeners to the newly created elements
                attachSectionEventListeners();
                
                // If in admin mode, make sure content is editable
                if (document.body.classList.contains('admin-mode')) {
                    enableContentEditing();
                }
            } else {
                // If no sections are saved, make sure existing sections are properly initialized
                const initialSections = [];
                const defaultSections = document.querySelectorAll('.section');
                
                defaultSections.forEach(section => {
                    const id = section.dataset.id;
                    const title = section.querySelector('h2').textContent;
                    const content = section.querySelector('div[id$="-content"]').innerHTML;
                    
                    initialSections.push({
                        id,
                        title,
                        content
                    });
                });
                
                if (initialSections.length > 0) {
                    localStorage.setItem('cvSections', JSON.stringify(initialSections));
                }
            }
        }
        
        // Create a new section element
        function createSectionElement(id, title, content) {
            const sectionDiv = document.createElement('div');
            sectionDiv.className = 'section';
            sectionDiv.dataset.id = id;
            
            sectionDiv.innerHTML = `
                <h2>${title}</h2>
                <div id="${id}-content" contenteditable="false">${content}</div>
                <div class="section-controls">
                    <button class="edit-btn">‚úèÔ∏è</button>
                    <button class="delete-section-btn">üóëÔ∏è</button>
                </div>
            `;
            
            sectionsContainer.appendChild(sectionDiv);
            
            // If in admin mode, make the new section editable
            if (document.body.classList.contains('admin-mode')) {
                const contentDiv = sectionDiv.querySelector(`#${id}-content`);
                const titleElement = sectionDiv.querySelector('h2');
                if (contentDiv) contentDiv.setAttribute('contenteditable', 'true');
                if (titleElement) titleElement.setAttribute('contenteditable', 'true');
            }
        }
        
        // Attach event listeners to section buttons
        function attachSectionEventListeners() {
            // Get updated references to the edit and delete buttons
            const editButtons = document.querySelectorAll('.edit-btn');
            const deleteButtons = document.querySelectorAll('.delete-section-btn');
            
            // Edit buttons
            editButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const section = this.closest('.section');
                    const content = section.querySelector('div[id$="-content"]');
                    if (content) {
                        content.focus();
                    } else {
                        // Fallback to any div in the section as a content area
                        const anyContent = section.querySelector('div');
                        if (anyContent) {
                            anyContent.focus();
                        }
                    }
                });
            });
            
            // Delete buttons
            deleteButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (confirm('Are you sure you want to delete this section?')) {
                        const section = this.closest('.section');
                        section.remove();
                        saveSections();
                    }
                });
            });
        }
        
        // Save all sections to localStorage
        function saveSections() {
            const sections = [];
            const sectionElements = document.querySelectorAll('.section');
            
            sectionElements.forEach(section => {
                const id = section.dataset.id;
                const title = section.querySelector('h2').textContent;
                const content = section.querySelector('div[id$="-content"]').innerHTML;
                
                sections.push({
                    id,
                    title,
                    content
                });
            });
            
            localStorage.setItem('cvSections', JSON.stringify(sections));
        }
        
        // Save CV content to localStorage
        function saveCVContent() {
            saveSections();
            alert("CV successfully saved!");
        }
        
        // Enable admin editing mode
        function enableEditMode() {
            document.body.classList.add('admin-mode');
            
            // Make all content areas editable
            enableContentEditing();
            
            // Show admin controls
            adminLoginBtn.style.display = 'none';
            saveAllBtn.style.display = 'inline-block';
            cancelBtn.style.display = 'inline-block';
            logoutBtn.style.display = 'inline-block';
        }
        
        // Disable admin editing mode
        function disableEditMode() {
            document.body.classList.remove('admin-mode');
            
            // Disable editing for content areas
            const editableAreas = document.querySelectorAll('.section div[id$="-content"]');
            editableAreas.forEach(area => {
                area.removeAttribute('contenteditable');
            });
            
            // Disable editing for section titles
            const sectionTitles = document.querySelectorAll('.section > h2');
            sectionTitles.forEach(title => {
                title.removeAttribute('contenteditable');
            });
            
            // Hide admin controls
            adminLoginBtn.style.display = 'inline-block';
            saveAllBtn.style.display = 'none';
            cancelBtn.style.display = 'none';
            logoutBtn.style.display = 'none';
        }
        
        // Handle image preview
        function updateImagePreview() {
            const url = imageUrlInput.value.trim();
            if (url) {
                previewImage.src = url;
            } else {
                previewImage.src = 'https://via.placeholder.com/150';
            }
        }
        
        // Generate a unique ID for new sections
        function generateUniqueId() {
            return 'section-' + Date.now();
        }
        
        // Reset the add section form
        function resetAddSectionForm() {
            sectionTitleInput.value = '';
            sectionContentInput.value = '';
            sectionTitleError.style.display = 'none';
            sectionContentError.style.display = 'none';
        }
        
        // Event Listeners
        adminLoginBtn.addEventListener('click', () => {
            loginModal.style.display = 'flex';
            adminPasswordInput.focus();
        });
        
        loginBtn.addEventListener('click', () => {
            if (adminPasswordInput.value === ADMIN_PASSWORD) {
                loginModal.style.display = 'none';
                enableEditMode();
                adminPasswordInput.value = '';
            } else {
                alert('Incorrect password. Try again.');
            }
        });
        
        closeModalBtn.addEventListener('click', () => {
            loginModal.style.display = 'none';
            adminPasswordInput.value = '';
        });
        
        saveAllBtn.addEventListener('click', saveCVContent);
        
        cancelBtn.addEventListener('click', () => {
            loadCVContent();
            disableEditMode();
        });
        
        logoutBtn.addEventListener('click', disableEditMode);
        
        // Profile image events
        changeImageBtn.addEventListener('click', () => {
            imageUrlInput.value = profileImg.src;
            updateImagePreview();
            imageModal.style.display = 'flex';
            imageUrlInput.focus();
        });
        
        imageUrlInput.addEventListener('input', updateImagePreview);
        
        saveImageBtn.addEventListener('click', () => {
            const newImageUrl = imageUrlInput.value.trim();
            if (newImageUrl) {
                profileImg.src = newImageUrl;
                localStorage.setItem('profileImageUrl', newImageUrl);
                imageModal.style.display = 'none';
            } else {
                alert('Please enter a valid image URL');
            }
        });
        
        closeImageModalBtn.addEventListener('click', () => {
            imageModal.style.display = 'none';
        });
        
        // Add section events
        addSectionBtn.addEventListener('click', () => {
            resetAddSectionForm();
            addSectionModal.style.display = 'flex';
            sectionTitleInput.focus();
        });
        
        closeAddSectionModalBtn.addEventListener('click', () => {
            addSectionModal.style.display = 'none';
        });
        
        createSectionBtn.addEventListener('click', () => {
            const title = sectionTitleInput.value.trim();
            const content = sectionContentInput.value.trim();
            let isValid = true;
            
            // Validate title
            if (!title) {
                sectionTitleError.style.display = 'block';
                isValid = false;
            } else {
                sectionTitleError.style.display = 'none';
            }
            
            // Validate content
            if (!content) {
                sectionContentError.style.display = 'block';
                isValid = false;
            } else {
                sectionContentError.style.display = 'none';
            }
            
            if (isValid) {
                const sectionId = generateUniqueId();
                createSectionElement(sectionId, title, `<p>${content}</p>`);
                attachSectionEventListeners();
                saveSections();
                addSectionModal.style.display = 'none';
                resetAddSectionForm();
            }
        });
        
        // Allow Enter key in login modal
        adminPasswordInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                loginBtn.click();
            }
        });
        
        // Allow Enter key in image URL input
        imageUrlInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                saveImageBtn.click();
            }
        });
        
        // Allow Enter key in add section form
        sectionTitleInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                sectionContentInput.focus();
            }
        });
        
        sectionContentInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                createSectionBtn.click();
            }
        });
        
        // Handle image errors
        profileImg.addEventListener('error', function() {
            this.src = 'https://via.placeholder.com/150';
        });
        
        previewImage.addEventListener('error', function() {
            this.src = 'https://via.placeholder.com/150';
        });
        
        // Initialize the page
        attachSectionEventListeners();
        
        // Load saved content on page load
        window.addEventListener('DOMContentLoaded', loadCVContent);

        // Make content areas editable
        function enableContentEditing() {
            // Make all section content editable
            const editableAreas = document.querySelectorAll('.section div[id$="-content"]');
            editableAreas.forEach(area => {
                area.setAttribute('contenteditable', 'true');
            });
            
            // Make section titles editable
            const sectionTitles = document.querySelectorAll('.section > h2');
            sectionTitles.forEach(title => {
                title.setAttribute('contenteditable', 'true');
            });
        }
    </script>
</body>
</html>
